- The data file is broken down into transactions, which are composed of
  one or more records.

- Atomic transactions are ensured by the initial "data flag" on each
  transaction.

- Each transaction consists of a control header followed by zero or more
  records, followed by a check code.

- The transaction immediately following the last one is marked as empty.

- Data from multiple records may be concatenated into one transaction.

- Check code is 64-bit CRC (8 bytes); polynomial is x64 + x4 + x3 + x1 + 1.
  It used to be MD4, but CRC is designed specifically to detect changed data,
  whereas a cryptographic hash is merely highly probable to detect changed
  data.

File Header Format:
- Constant string (8 bytes): "journald"
- Version (2)
- Page size (maximum of OS page size and FS block size)
- First global record number
- Option bytes
- Option data (variable size)
- Check code
- NUL padding to the end of the first page

Option Data:
- NUL seperated list of ASCII strings?

Options:
- Writer concurrency

Transaction Format:
- Zero or more records (empty transaction marks the end of journal)
- One NUL byte
- NUL padding to the end of the page (should be ignored by reader)

Record Format:
- Record type (single byte):
  "I": stream information
  "D": data record for the given stream
  "O": first and last record (once) for the given stream
  "E": end of the records for the given stream
  "A": abort record
- Global record number
- Stream number
- Local (per-stream) record number
- Record data length
- Record data
- Check code on all the data from the record type flag to the last byte
  of the record data.

Stream Information Data Format:
- Current stream offset
- Identifier string

- All record types may contain data.  Data for "A" records is ignored.

- The first record in a transaction is initially marked with a NUL
  record type, which is restored after the rest of the data is sync'ed
  to disk (two-pass algorithm).

- The stream number is a sequential marker that starts at zero when the
  server starts up, and may not be zero for the first record in the
  file.

- The record number is a sequential marker that starts at zero for each
  new stream.

- Possible sequences of record types within a stream:
  I O
  I D* E
  I D* A

- Unless otherwise noted, all the above numbers are represented as a
  4-byte binary value, MSB first.

- All strings are prefixed with their length

- The stream information record always has a record number of zero, and
  do not affect the record numbering of other records.

- The stream information record for a given stream will always precede
  any data records for that stream within an individual journal file.

- The following "magic" entries can be used to identify journald files:
0	string		journald	Journald file
>8	belong		x		version %d
>12	belong		x		page size %d
